const fz = require('zigbee-herdsman-converters/converters/fromZigbee');
const tz = require('zigbee-herdsman-converters/converters/toZigbee');
const exposes = require('zigbee-herdsman-converters/lib/exposes');
const reporting = require('zigbee-herdsman-converters/lib/reporting');
const e = exposes.presets;
const ea = exposes.access;

const tzLocal = {
    node_config: {
        key: ['report_delay', 'comparison_previous_data', 'led_illumination', 'led_freq', 'led_duration'],
        convertSet: async (entity, key, rawValue, meta) => {
            const lookup = {'OFF': 0x00, 'ON': 0x01};
			const endpoint = meta.device.getEndpoint(1);
            const value = lookup.hasOwnProperty(rawValue) ? lookup[rawValue] : parseInt(rawValue, 10);
            const payloads = {
                report_delay: ['genBasic', {0x0201: {value, type: 0x21}}],
				comparison_previous_data: ['genBasic', {0x0205: {value, type: 0x10}}],
				led_illumination: ['genBasic', {0x0600: {value, type: 0x10}}],
				led_freq: ['genBasic', {0x0601: {value, type: 0x21}}],
				led_duration: ['genBasic', {0x0602: {value, type: 0x21}}],
            };
            await endpoint.write(payloads[key][0], payloads[key][1]);
            return {
                state: {[key]: rawValue},
            };
        },
    },
};

const fzLocal = {
    node_config: {
        cluster: 'genBasic',
        type: ['attributeReport', 'readResponse'],
        convert: (model, msg, publish, options, meta) => {
            const result = {};
            if (msg.data.hasOwnProperty(0x0201)) {
                result.report_delay = msg.data[0x0201];
            }
			if (msg.data.hasOwnProperty(0x0205)) {
				result.comparison_previous_data = ['OFF', 'ON'][msg.data[0x0205]];
            }
			if (msg.data.hasOwnProperty(0x0600)) {
				result.led_illumination = ['OFF', 'ON'][msg.data[0x0600]];
            }
			if (msg.data.hasOwnProperty(0x0601)) {
				result.led_freq = msg.data[0x0601];
            }
			if (msg.data.hasOwnProperty(0x0602)) {
				result.led_duration = msg.data[0x0602];
            }
            return result;
        },
    },
};

const definition = {
        zigbeeModel: ['Pool_Temperature_smart_sensor'],
        model: 'Pool_Temperature_smart_sensor',
        vendor: 'Custom devices (DiY)',
        description: 'Temperature and light smart sensor for swimming pool',
        fromZigbee: [fz.battery, fzLocal.node_config, fz.temperature, fz.illuminance],
        toZigbee: [tz.factory_reset, tzLocal.node_config],
        configure: async (device, coordinatorEndpoint, logger) => {
			const endpointOne = device.getEndpoint(1);
			await reporting.bind(endpointOne, coordinatorEndpoint, ['genBasic', 'genPowerCfg', 'msTemperatureMeasurement', 'msIlluminanceMeasurement']);
        },
        icon: 'data:image/jpeg;base64,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AAAAQ250Q2Jvb2wAAAAAAExibHNib29sAAAAAABOZ3R2Ym9vbAAAAAAARW1sRGJvb2wAAAAAAEludHJib29sAAAAAABCY2tnT2JqYwAAAAEAAAAAAABSR0JDAAAAAwAAAABSZCAgZG91YkBv4AAAAAAAAAAAAEdybiBkb3ViQG/gAAAAAAAAAAAAQmwgIGRvdWJAb+AAAAAAAAAAAABCcmRUVW50RiNSbHQAAAAAAAAAAAAAAABCbGQgVW50RiNSbHQAAAAAAAAAAAAAAABSc2x0VW50RiNQeGxAUf75wAAAAAAAAAp2ZWN0b3JEYXRhYm9vbAEAAAAAUGdQc2VudW0AAAAAUGdQcwAAAABQZ1BDAAAAAExlZnRVbnRGI1JsdAAAAAAAAAAAAAAAAFRvcCBVbnRGI1JsdAAAAAAAAAAAAAAAAFNjbCBVbnRGI1ByY0BZAAAAAAAAAAAAEGNyb3BXaGVuUHJpbnRpbmdib29sAAAAAA5jcm9wUmVjdEJvdHRvbWxvbmcAAAAAAAAADGNyb3BSZWN0TGVmdGxvbmcAAAAAAAAADWNyb3BSZWN0UmlnaHRsb25nAAAAAAAAAAtjcm9wUmVjdFRvcGxvbmcAAAAAADhCSU0D7QAAAAAAEABH++cAAQABAEf75wABAAE4QklNBCYAAAAAAA4AAAAAAAAAAAAAP4AAADhCSU0EDQAAAAAABAAAAFo4QklNBBkAAAAAAAQAAAAeOEJJTQPzAAAAAAAJAAAAAAAAAAABADhCSU0nEAAAAAAACgABAAAAAAAAAAE4QklNA/UAAAAAAEgAL2ZmAAEAbGZmAAYAAAAAAAEAL2ZmAAEAoZmaAAYAAAAAAAEAMgAAAAEAWgAAAAYAAAAAAAEANQAAAAEALQAAAAYAAAAAAAE4QklNA/gAAAAAAHAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAOEJJTQQAAAAAAAACAAE4QklNBAIAAAAAAAQAAAAAOEJJTQQwAAAAAAACAQE4QklNBC0AAAAAAAYAAQAAAAI4QklNBAgAAAAAABAAAAABAAACQAAAAkAAAAAAOEJJ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ZXNvdXJjZVJlZiMiIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDI0LTAxLTAzVDIxOjM0OjM2KzAzOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDI0LTAxLTAzVDIxOjM1KzAzOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyNC0wMS0wM1QyMTozNSswMzowMCIgZGM6Zm9ybWF0PSJpbWFnZS9qcGVnIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmFiYWNhN2M5LWNmZTUtYjM0MC1iZmU2LTNhNWFkN2NlZmU4NyIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmQxNDU5MGEzLWE1ZDEtMWM0OC05ZGVmLTgwMmEzYWQzMjBmZSIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmM2NjAzN2RiLWZmNzMtYjY0YS1iNTk0LTMyY2QxMjAzZjZjZCIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YzY2MDM3ZGItZmY3My1iNjRhLWI1OTQtMzJjZDEyMDNmNmNkIiBzdEV2dDp3aGVuPSIyMDI0LTAxLTAzVDIxOjM0OjM2KzAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjMzNTBhNmZlLTViMDMtODk0NS05ODk2LWViYjNjMDM4ZTY1ZSIgc3RFdnQ6d2hlbj0iMjAyNC0wMS0wM1QyMTozNSswMzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjb252ZXJ0ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9qcGVnIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL2pwZWciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmFiYWNhN2M5LWNmZTUtYjM0MC1iZmU2LTNhNWFkN2NlZmU4NyIgc3RFdnQ6d2hlbj0iMjAyNC0wMS0wM1QyMTozNSswMzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozMzUwYTZmZS01YjAzLTg5NDUtOTg5Ni1lYmIzYzAzOGU2NWUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6YzY2MDM3ZGItZmY3My1iNjRhLWI1OTQtMzJjZDEyMDNmNmNkIiBzdFJlZjpvcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YzY2MDM3ZGItZmY3My1iNjRhLWI1OTQtMzJjZDEyMDNmNmNkIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg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',        exposes: [e.battery(), e.battery_low(), e.battery_voltage(), e.temperature(), e.illuminance(), e.illuminance_lux(),
		exposes.numeric('report_delay', ea.STATE_SET).withUnit('Seconds').withDescription('Adjust Report Delay. Setting the time in seconds, by default 60 seconds')
            .withValueMin(20).withValueMax(3600),
		exposes.binary('comparison_previous_data', ea.STATE_SET, 'ON', 'OFF').withDescription('Enable сontrol of comparison with previous data'),
		exposes.binary('led_illumination', ea.STATE_SET, 'ON', 'OFF').withDescription('Enable сontrol of LED'),
		exposes.numeric('led_freq', ea.STATE_SET).withUnit('Seconds').withDescription('LED operation interval').withValueMin(1).withValueMax(3600),
		exposes.numeric('led_duration', ea.STATE_SET).withUnit('Milliseconds').withDescription('LED flash duration').withValueMin(1).withValueMax(5000)],
};

module.exports = definition;
